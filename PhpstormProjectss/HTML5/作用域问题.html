<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>作用域问题</title>
    <script>
        /*   window.onload=function () {
               var lis=document.querySelectorAll("li");
               for(var i=0;i<lis.length;i++){
                   var li=lis[i];
                   li.onclick=function () {
                       window.alert(i);//全是4，因为这个是所有遍历操作完了才执行的，最后这个i变成了4，i作用域是方法内的
                   }
               }
           }*/
        /*  window.onload=function () {
              var lis=document.querySelectorAll("li");
              for(var i=0;i<lis.length;i++){
                  var li=lis[i];
                  (function (num) {
                      li.onclick=function () {
                          window.alert(num);//这个就是按每个i值来的，因为这个i传入值给num，只与这个独立方法的num有关，两者作用域独立的
                      }
                  })(i);
              }
          }*/

        ////这个就是按每个i值来的，因为这个i传入值给num，只与这个独立方法的num有关，两者作用域独立的，独立的方法
       /* function bindli(li, num) {
            li.onclick = function () {
                window.alert(num);
            }
        }

        window.onload = function () {
//            因为var 声明会提前到这里  var i；
            var lis = document.querySelectorAll("li");
            for (var i = 0; i < lis.length; i++) {
                var li = lis[i];
                bindli(li, i);

            }
        };*/

        //改成let就可以解决了,let  es6用法，声明不会提前，setting->languages->javascript->改为js6，let就不会出现红色下划线了
        window.onload = function () {
//            因为var 声明会提前到这里  var i；
            var lis = document.querySelectorAll("li");
            for (let i = 0; i < lis.length; i++) {
               lis[i].onclick=function () {
                   alert(i)
               }
            }
        }


        /*
        //为当前元素增加index  并赋值当前的i
        window.onload = function () {
            var lis = document.querySelectorAll("li");
            for (var i = 0; i < lis.length; i++) {
                lis[i].setAttribute("index",i);
                lis[i].onclick=function () {
                    var num = this.getAttribute("index");
                    alert(num);
                }

            }
*/
/*
        //获取最外面的div
        var box=my$("box");
        //获取的是里面的第一个div
        var hd=box.getElementsByTagName("div")[0];
        //获取的是里面的第二个div
        var bd=box.getElementsByTagName("div")[1];
        //获取所有的li标签
        var list=bd.getElementsByTagName("li");//=================================
        //获取所有的span标签
        var spans=hd.getElementsByTagName("span");
        //循环遍历的方式,添加点击事件
        for(var i=0;i<spans.length;i++){
            //在点击之前就把索引保存在span标签中
            spans[i].setAttribute("index",i);//================================
            spans[i].onclick=function () {
                //第一件事,所有的span的类样式全部移除
                for(var j=0;j<spans.length;j++){
                    spans[j].removeAttribute("class");
                }

                //第二件事,当前被点击的span应用类样式
                this.className="current";
                //span被点击的时候获取存储的索引值
                //alert(this.getAttribute("index"));
                var num=this.getAttribute("index");//==============================

                //获取所有的li标签,每个li标签先全部隐藏
                for(var k=0;k<list.length;k++){
                    list[k].removeAttribute("class");
                }
                //当前被点击的span对应的li标签显示
                list[num].className="current";
            };
        }*/
    </script>
</head>
<body>
<ul>
    <li>test1</li>
    <li>test2</li>
    <li>test3</li>
    <li>test4</li>
</ul>
</body>
</html>